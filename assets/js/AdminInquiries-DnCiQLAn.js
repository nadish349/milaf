import{j as e}from"./index-jHmpFEMT.js";import{r as s}from"./vendor-CyyySG0f.js";import{f as a,m as t}from"./inquiryFetch-mdR6qjWO.js";import{B as r,C as i,a as l,b as n,d as c}from"./card-CmKHpVHl.js";import{B as d}from"./badge-BCeezdQg.js";import{e as x,U as m,E as h,M as o,P as j,C as u,a as N,d as g}from"./ui-D10HkiTw.js";import"./router-Dpy7eVzN.js";import"./firebase-rYhY7HPw.js";const p=()=>{const[p,y]=s.useState([]),[f,b]=s.useState(!0),[v,w]=s.useState(null),[q,k]=s.useState(null);s.useEffect(()=>{A()},[]);const A=async()=>{try{b(!0),w(null);const e=await a();y(e)}catch(e){w(e instanceof Error?e.message:"Failed to load inquiries")}finally{b(!1)}},C=e=>{if(!e)return"Unknown date";try{return e.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},I=p.filter(e=>!e.read).length;return f?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Business Inquiries"}),e.jsx("p",{className:"text-gray-600",children:"Loading inquiries..."})]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})})]}):v?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Business Inquiries"}),e.jsx("p",{className:"text-gray-600",children:"Error loading inquiries"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-600",children:v}),e.jsx(r,{onClick:A,className:"mt-4",children:"Try Again"})]})]}):e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Business Inquiries"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[p.length," total â€¢ ",I," unread"]})]}),e.jsx(r,{onClick:A,variant:"outline",size:"sm",children:"Refresh"})]})}),q?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(r,{variant:"outline",onClick:()=>k(null),className:"w-full",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Back to Inquiries List"]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{className:"flex items-center gap-2 text-lg",children:[e.jsx(m,{className:"w-5 h-5"}),q.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"text-xs",children:q.inquiryAbout}),!q.read&&e.jsxs(r,{size:"sm",onClick:()=>(async e=>{try{await t(e.month,e.id),y(s=>s.map(s=>s.id===e.id?{...s,read:!0}:s)),q?.id===e.id&&k({...e,read:!0})}catch(s){}})(q),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(h,{className:"w-4 h-4 mr-1"}),"Mark Read"]})]})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-sm",children:q.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-sm",children:q.contactNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsx("p",{className:"font-medium text-sm",children:C(q.createdAt)})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(d,{variant:q.read?"secondary":"default",className:"text-xs",children:q.read?"Read":"Unread"})})]}),q.address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Address"}),e.jsx("p",{className:"font-medium text-sm",children:q.address})]})]}),q.questions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Questions/Message"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:q.questions})})]})]})]})]}):e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"All Inquiries"]})}),e.jsx(c,{children:0===p.length?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No inquiries found"}):e.jsx("div",{className:"space-y-3",children:p.map(s=>e.jsx("div",{className:"p-4 border rounded-lg cursor-pointer transition-all "+(s.read?"border-gray-200 bg-white":"border-blue-500 bg-blue-50"),onClick:()=>k(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:s.name}),!s.read&&e.jsx(d,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs",children:"New"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:s.inquiryAbout}),e.jsx("p",{className:"text-xs text-gray-500",children:C(s.createdAt)})]}),e.jsx("div",{className:"text-right",children:e.jsx(d,{variant:"outline",className:"text-xs",children:s.month})})]})},`${s.month}-${s.id}`))})})]})]})};export{p as AdminInquiries};
