import{P as e,j as t,a as r,d as n,e as s}from"./index-jHmpFEMT.js";import{b as a,r as o}from"./vendor-CyyySG0f.js";import{H as i}from"./Header-D2yZvfnV.js";import{C as l,d as c,B as d}from"./card-CmKHpVHl.js";import{L as u}from"./label-DM97D0RX.js";import{s as m,a as p}from"./PostalCodeAutocomplete-DBHDLA_4.js";import{m as f}from"./m1-DUCQGgOG.js";import{m as h,l as x}from"./firebase-rYhY7HPw.js";import{u as g}from"./router-Dpy7eVzN.js";import"./ui-D10HkiTw.js";import"./LoginForm-DeovXXO9.js";var y,b="basil",v="https://js.stripe.com",j="".concat(v,"/").concat(b,"/stripe.js"),w=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,N=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,S=function(e){return w.test(e)||N.test(e)},k=function(e){var t=document.createElement("script");t.src="".concat(j).concat("");var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},C=null,E=null,P=null,A=function(e){return null!==C?C:(C=new Promise(function(t,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(v,'"]')),t=0;t<e.length;t++){var r=e[t];if(S(r.src))return r}return null}();if(n&&e);else if(n){if(n&&null!==P&&null!==E){var s;n.removeEventListener("load",P),n.removeEventListener("error",E),null===(s=n.parentNode)||void 0===s||s.removeChild(n),n=k()}}else n=k();P=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),E=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(r),n.addEventListener("load",P),n.addEventListener("error",E)}catch(a){return void r(a)}else t(null)})).catch(function(e){return C=null,Promise.reject(e)})},O=function(){return y||(y=A(null).catch(function(e){return y=null,Promise.reject(e)}))};Promise.resolve().then(function(){return O()}).catch(function(e){});function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,s,a=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){i=!0,s=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e,t,r){var n=!!r,s=a.useRef(r);a.useEffect(function(){s.current=r},[r]),a.useEffect(function(){if(!n||!e)return function(){};var r=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,r),function(){e.off(t,r)}},[n,t,e,s])},W=function(e){var t=a.useRef(e);return a.useEffect(function(){t.current=e},[e]),t.current},D=function(e){return null!==e&&"object"===z(e)},F="[object Object]",_=function e(t,r){if(!D(t)||!D(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var s=Object.prototype.toString.call(t)===F;if(s!==(Object.prototype.toString.call(r)===F))return!1;if(!s&&!n)return t===r;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var i={},l=0;l<a.length;l+=1)i[a[l]]=!0;for(var c=0;c<o.length;c+=1)i[o[c]]=!0;var d=Object.keys(i);if(d.length!==a.length)return!1;var u=t,m=r;return d.every(function(t){return e(u[t],m[t])})},q=function(e,t,r){return D(e)?Object.keys(e).reduce(function(n,s){var a=!D(t)||!_(e[s],t[s]);return r.includes(s)?n:a?M(M({},n||{}),{},R({},s,e[s])):n},null):null},G="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",H=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;if(null===e||D(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(r)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;if(function(e){return D(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return H(e,t)})};var r=H(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},V=a.createContext(null);V.displayName="ElementsContext";var Y=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},J=function(e){var t=e.stripe,r=e.options,n=e.children,s=a.useMemo(function(){return U(t)},[t]),o=B(a.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}}),2),i=o[0],l=o[1];a.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==s.tag||i.stripe?"sync"!==s.tag||i.stripe||t(s.stripe):s.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[s,i,r]);var c=W(t);a.useEffect(function(){},[c,t]);var d=W(r);return a.useEffect(function(){if(i.elements){var e=q(r,d,["clientSecret","fonts"]);e&&i.elements.update(e)}},[r,d,i.elements]),a.useEffect(function(){var e;(e=i.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.1"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.1",url:"https://stripe.com/docs/stripe-js/react"}))},[i.stripe]),a.createElement(V.Provider,{value:i},n)};J.propTypes={stripe:e.any,options:e.object};var K=function(){var e,t;return(e="calls useElements()",t=a.useContext(V),Y(t,e)).elements};e.func.isRequired;var Z=a.createContext(null);Z.displayName="CheckoutContext",e.any,e.shape({fetchClientSecret:e.func.isRequired,elementsOptions:e.object}).isRequired;var Q=function(e){var t=a.useContext(Z),r=a.useContext(V);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}return Y(r,e)},X=["mode"],ee=function(t,r){var n,s="".concat((n=t).charAt(0).toUpperCase()+n.slice(1),"Element"),o=r?function(e){Q("mounts <".concat(s,">"));var t=e.id,r=e.className;return a.createElement("div",{id:t,className:r})}:function(e){var r,n=e.id,o=e.className,i=e.options,l=void 0===i?{}:i,c=e.onBlur,d=e.onFocus,u=e.onReady,m=e.onChange,p=e.onEscape,f=e.onClick,h=e.onLoadError,x=e.onLoaderStart,g=e.onNetworksChange,y=e.onConfirm,b=e.onCancel,v=e.onShippingAddressChange,j=e.onShippingRateChange,w=e.onSavedPaymentMethodRemove,N=e.onSavedPaymentMethodUpdate,S=Q("mounts <".concat(s,">")),k="elements"in S?S.elements:null,C="checkoutState"in S?S.checkoutState:null,E="success"===(null==C?void 0:C.type)?C.checkout:null,P=B(a.useState(null),2),A=P[0],O=P[1],L=a.useRef(null),M=a.useRef(null);T(A,"blur",c),T(A,"focus",d),T(A,"escape",p),T(A,"click",f),T(A,"loaderror",h),T(A,"loaderstart",x),T(A,"networkschange",g),T(A,"confirm",y),T(A,"cancel",b),T(A,"shippingaddresschange",v),T(A,"shippingratechange",j),T(A,"savedpaymentmethodremove",w),T(A,"savedpaymentmethodupdate",N),T(A,"change",m),u&&(r="expressCheckout"===t?u:function(){u(A)}),T(A,"ready",r),a.useLayoutEffect(function(){if(null===L.current&&null!==M.current&&(k||E)){var e=null;if(E)switch(t){case"payment":e=E.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var r=l.mode,n=$(l,X);if("shipping"===r)e=E.createShippingAddressElement(n);else{if("billing"!==r)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");e=E.createBillingAddressElement(n)}break;case"expressCheckout":e=E.createExpressCheckoutElement(l);break;case"currencySelector":e=E.createCurrencySelectorElement();break;case"taxId":e=E.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else k&&(e=k.create(t,l));L.current=e,O(e),e&&e.mount(M.current)}},[k,E,l]);var z=W(l);return a.useEffect(function(){if(L.current){var e=q(l,z,["paymentRequest"]);e&&"update"in L.current&&L.current.update(e)}},[l,z]),a.useLayoutEffect(function(){return function(){if(L.current&&"function"==typeof L.current.destroy)try{L.current.destroy(),L.current=null}catch(e){}}},[]),a.createElement("div",{id:n,className:o,ref:M})};return o.propTypes={id:e.string,className:e.string,onChange:e.func,onBlur:e.func,onFocus:e.func,onReady:e.func,onEscape:e.func,onClick:e.func,onLoadError:e.func,onLoaderStart:e.func,onNetworksChange:e.func,onConfirm:e.func,onCancel:e.func,onShippingAddressChange:e.func,onShippingRateChange:e.func,onSavedPaymentMethodRemove:e.func,onSavedPaymentMethodUpdate:e.func,options:e.object},o.displayName=s,o.__elementType=t,o},te="undefined"==typeof window;a.createContext(null).displayName="EmbeddedCheckoutProviderContext";ee("auBankAccount",te);var re=ee("card",te);ee("cardNumber",te),ee("cardExpiry",te),ee("cardCvc",te),ee("fpxBank",te),ee("iban",te),ee("idealBank",te),ee("p24Bank",te),ee("epsBank",te),ee("payment",te),ee("expressCheckout",te),ee("paymentRequestButton",te),ee("linkAuthentication",te),ee("address",te),ee("shippingAddress",te),ee("paymentMethodMessaging",te),ee("affirmMessage",te),ee("afterpayClearpayMessage",te),ee("taxId",te);const ne=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];0;var n=Date.now();return O().then(function(e){return function(e,t,r){if(null===e)return null;t[0].match(/^pk_test/),e.version;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(n,r),n}(e,t,n)})}("pk_test_your_stripe_publishable_key_here"),se={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},ae=()=>{const e=Q("calls useStripe()").stripe,n=K(),{getTotalPrice:s,clearCart:a}=r(),[i,l]=o.useState(!1),[c,m]=o.useState(null);return t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!e||!n)return;l(!0),m(null);const r=n.getElement(re);if(!r)return m("Card element not found"),void l(!1);try{const{error:t,paymentMethod:n}=await e.createPaymentMethod({type:"card",card:r});if(t)return m(t.message||"Payment failed"),void l(!1);alert("Payment successful! (Demo mode)"),await a()}catch(s){m("An unexpected error occurred")}finally{l(!1)}},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(u,{htmlFor:"card-element",className:"text-sm font-semibold text-gray-700",children:"Card Details"}),t.jsx("div",{className:"p-3 border border-gray-300 rounded-lg focus-within:border-green-500 focus-within:ring-1 focus-within:ring-green-500",children:t.jsx(re,{id:"card-element",options:se})}),c&&t.jsx("div",{className:"text-red-600 text-sm mt-2",children:c})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"text-xs text-blue-800",children:[t.jsx("div",{className:"font-semibold mb-0.5",children:"Secure Payment"}),t.jsx("div",{className:"text-blue-700",children:"Your payment is processed securely by Stripe"})]})]})}),t.jsx(d,{type:"submit",disabled:!e||i,className:"w-full h-10 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold text-base rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-0 disabled:opacity-50 disabled:cursor-not-allowed",children:i?t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pay $",s().toFixed(2)]})})]})},oe=()=>t.jsx("div",{className:"flex items-center justify-center p-2",children:t.jsx(l,{className:"max-w-sm w-full rounded-xl shadow-xl border-0 bg-gradient-to-br from-white to-gray-50",children:t.jsxs(c,{className:"p-4 space-y-4",children:[t.jsx("div",{className:"text-center mb-3",children:t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Secure Checkout"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Powered by Stripe"})]})]})}),t.jsx(J,{stripe:ne,children:t.jsx(ae,{})}),t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-3 text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx("span",{children:"SSL Secure"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),t.jsx("span",{children:"PCI DSS"})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),t.jsx("span",{children:"Encrypted"})]})]})})]})})}),ie=()=>t.jsx(oe,{}),le=({value:e,onChange:r,placeholder:n="Enter zip code or address",className:s="",required:a=!1,onSuggestionSelect:i,fieldType:l="zipcode"})=>{const[c,d]=o.useState([]),[u,f]=o.useState(!1),[h,x]=o.useState(!1),g=o.useRef(null),y=o.useRef(null);return o.useEffect(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:g,type:"text",value:e,onChange:e=>{const t=e.target.value;if(r(t),t.length>=2){x(!0);const e=/^\d+$/.test(t);setTimeout(()=>{try{let r=[];r=e?m(t):p(t),d(r),f(r.length>0)}catch(r){d([]),f(!1)}finally{x(!1)}},100)}else d([]),f(!1),x(!1)},onFocus:()=>{c.length>0&&f(!0)},onBlur:e=>{setTimeout(()=>{y.current?.contains(document.activeElement)||f(!1)},200)},onKeyDown:e=>{"Escape"===e.key&&f(!1)},className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ${s}`,placeholder:n,required:a,autoComplete:"off"}),h&&t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-500"})}),u&&c.length>0&&t.jsx("div",{ref:y,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:c.map((e,n)=>t.jsxs("div",{className:"px-3 py-2 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors duration-150",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{r("zipcode"===l?e.postcode.toString():`${e.suburb}, ${e.state}`),f(!1),d([]),i&&i(e)})(e)},onMouseDown:e=>{e.preventDefault()},children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.displayText}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"zipcode"===l?`Click to select postcode: ${e.postcode}`:`Click to select: ${e.suburb}, ${e.state}`})]},`${e.postcode}-${e.suburb}-${n}`))})]})},ce=()=>{const{cartItems:e,getTotalPrice:a,getTotalItems:l}=r(),[c,d]=o.useState(""),[u,m]=o.useState({companyName:"",buyerName:"",contact:"",address:"",zipcode:""}),[p,y]=o.useState(!1),[b,v]=o.useState(!1);g(),o.useEffect(()=>{n.currentUser&&j()},[]);const j=async()=>{try{const e=await h(x(s,"users",n.currentUser.uid));if(e.exists()){const t=e.data();m(e=>({...e,buyerName:t.displayName||"",contact:t.phone||"",address:t.address||"",zipcode:t.zipcode||""}))}}catch(e){}},w=(e,t)=>{m(r=>({...r,[e]:t}))},N=()=>{y(!1)};return p?t.jsxs("div",{className:"min-h-screen",style:{backgroundImage:`url(${f})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[t.jsx(i,{}),t.jsx("div",{className:"pt-12 pb-4 px-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("button",{onClick:N,className:"mb-2 w-8 h-8 rounded-full bg-white shadow-lg hover:bg-gray-100 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Payment Method"}),t.jsx("p",{className:"text-white text-sm",children:"Choose your preferred payment option"})]}),t.jsx(ie,{})]})})]}):t.jsxs("div",{className:"min-h-screen",style:{backgroundImage:`url(${f})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[t.jsx(i,{}),t.jsx("div",{className:"pt-12 pb-4 px-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("button",{onClick:()=>{window.history.back()},className:"mb-2 w-8 h-8 rounded-full bg-white shadow-lg hover:bg-gray-100 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Payment Details"}),t.jsx("p",{className:"text-white text-sm",children:"Complete your order with billing and delivery information"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"Billing Address"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Company Name *"}),t.jsx("input",{type:"text",value:u.companyName,onChange:e=>w("companyName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Enter company name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Buyer Name *"}),t.jsx("input",{type:"text",value:u.buyerName,onChange:e=>w("buyerName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Enter buyer name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Contact Number *"}),t.jsx("input",{type:"tel",value:u.contact,onChange:e=>w("contact",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Enter contact number",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Address *"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{type:"button",onClick:()=>{if(!navigator.geolocation)return void alert("Geolocation is not supported by this browser.");v(!0);navigator.geolocation.getCurrentPosition(async e=>{try{const{latitude:r,longitude:n,accuracy:s,altitude:a,heading:o,speed:i}=e.coords;let l="",c="";try{const e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${n}&addressdetails=1&zoom=18&extratags=1&namedetails=1&accept-language=en`);if(e.ok){if(l=(await e.json()).display_name,c=l,null!=a){const e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${n}&addressdetails=1&zoom=19&extratags=1&namedetails=1&accept-language=en`);if(e.ok){const t=await e.json();t.display_name&&t.display_name.length>l.length&&(c=t.display_name)}}}}catch(t){}if(c){m(e=>({...e,address:c}));let e="",t="";s<=5?(e="Ultra-High Accuracy Multi-Sensor",t="GPS + Wi-Fi + Cellular + Sensors"):s<=10?(e="High Accuracy Multi-Sensor",t="GPS + Wi-Fi + Cellular"):s<=25?(e="Good Accuracy Multi-Sensor",t="GPS + Wi-Fi"):s<=50?(e="Moderate Accuracy Multi-Sensor",t="GPS + Cellular"):(e="Basic GPS Accuracy",t="GPS Only");const a=`Location Retrieved Successfully!\n\nAccuracy: ${e}\nPrecision: ${Math.round(s)}m\nSensors Used: ${t}\nCoordinates: ${r.toFixed(6)}, ${n.toFixed(6)}\n\nAddress: ${c.substring(0,120)}${c.length>120?"...":""}`;alert(a)}else alert("Could not retrieve address from coordinates. Please enter manually.")}catch(t){alert("Error retrieving address. Please enter manually.")}finally{v(!1)}},e=>{let t="Could not get your precise location. ",r="";switch(e.code){case e.PERMISSION_DENIED:t+="Location permission denied.",r="\n\nTo enable precise location:\n1. Click the location icon in your browser\n2. Select 'Allow' for location access\n3. Enable GPS, Wi-Fi, and cellular location services";break;case e.POSITION_UNAVAILABLE:t+="Location information unavailable.",r="\n\nTry:\n1. Moving to an open area\n2. Enabling Wi-Fi and cellular data\n3. Waiting a few seconds for GPS lock";break;case e.TIMEOUT:t+="Location request timed out.",r="\n\nThis usually means:\n1. GPS is still acquiring satellites\n2. Wi-Fi positioning is slow\n3. Try again in a few seconds";break;default:t+="Unknown positioning error.",r="\n\nPlease try:\n1. Refreshing the page\n2. Checking your device location settings\n3. Entering address manually"}alert(t+r),v(!1)},{enableHighAccuracy:!0,timeout:2e4,maximumAge:0})},disabled:b,className:"w-full px-3 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white text-sm font-medium rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Getting Multi-Sensor Location..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.jsx("span",{children:"Get Current Location"})]})}),t.jsx(le,{value:u.address,onChange:e=>w("address",e),placeholder:"Enter address, suburb, or city name",fieldType:"address",required:!0,onSuggestionSelect:e=>{m(t=>({...t,zipcode:e.postcode.toString()}))}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Zip Code *"}),t.jsx(le,{value:u.zipcode,onChange:e=>w("zipcode",e),placeholder:"Enter zip code or suburb name",fieldType:"zipcode",required:!0,onSuggestionSelect:e=>{m(t=>({...t,address:`${e.suburb}, ${e.state}`}))}})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"Delivery Options"}),t.jsx("div",{className:"space-y-2",children:[{id:"pickup",name:"Pick up from Warehouse",description:"Collect your order from our warehouse",estimatedDays:"Same day"},{id:"australian-post",name:"Australian Post",description:"Standard domestic shipping",estimatedDays:"5-7 business days"}].map(e=>t.jsx("div",{onClick:()=>d(e.id),className:"p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:shadow-md "+(c===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+(c===e.id?"border-green-500 bg-green-500":"border-gray-300"),children:c===e.id&&t.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:e.name}),t.jsx("p",{className:"text-xs text-gray-600",children:e.description}),t.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Estimated: ",e.estimatedDays]})]})]})})})},e.id))}),t.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Warehouse Address"}),t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Beverages will be dispatched from here"}),t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("p",{className:"font-medium",children:"Factory Warehouse Location"}),t.jsx("p",{children:"3/85 Alfred Street"}),t.jsx("p",{children:"Chipping Norton 2170 NSW Australia"})]})]}),t.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Order Summary"}),0===e.length?t.jsx("p",{className:"text-xs text-gray-500",children:"No items in cart"}):t.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:["$",a().toFixed(2)]})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>{y(!0)},disabled:!(u.companyName&&u.buyerName&&u.contact&&u.address&&u.zipcode&&c),className:"bg-green-400 hover:bg-green-300 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-black font-bold text-base py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg w-full lg:w-auto",children:"Proceed to Payment"})})]})})]})};export{ce as Payment};
