import{a as e,b as s,j as t}from"./index-jHmpFEMT.js";import{r}from"./vendor-CyyySG0f.js";import{m as a}from"./m1-DUCQGgOG.js";import{H as l}from"./Header-D2yZvfnV.js";import{L as i}from"./LoginForm-DeovXXO9.js";import{u as n,a as o}from"./orderSummaryService-BiDn9kIB.js";import{u as d}from"./router-Dpy7eVzN.js";import"./ui-D10HkiTw.js";import"./firebase-rYhY7HPw.js";import"./card-CmKHpVHl.js";import"./label-DM97D0RX.js";import"./PostalCodeAutocomplete-DBHDLA_4.js";import"./productImages-BIVgD51t.js";import"./milafcola-BJYXYRQ2.js";const c=()=>{const{updateQuantity:c,removeFromCart:x,getTotalPrice:m,getTotalItems:h,isGuest:g,mergeGuestCart:p}=e(),{user:u}=s(),j=d(),[y,b]=r.useState(!1),{cartItems:v,orderedItems:f,isLoadingOrders:N,loadCartAndOrders:w,getCartImage:k}=n(),{processedCartItems:C,orderSummary:L,isLoading:S,subtotalDisplay:D,shippingDisplay:I,totalDisplay:A,itemCountDisplay:B,shippingMessage:H,orderBreakdown:M}=o(v);r.useEffect(()=>{w()},[u]);const $=()=>{window.history.back()},q=e=>{if(!e)return"Unknown date";let s;return s=e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):new Date(e),s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return t.jsxs("div",{className:"fixed inset-0 overflow-hidden",style:{backgroundImage:`url(${a})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[t.jsx(l,{showNavigationWithoutShop:!0}),t.jsx("div",{className:"pt-16 h-full overflow-y-auto px-4 pb-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("div",{className:"relative z-50 mb-2",children:t.jsx("button",{onClick:$,className:"w-10 h-10 rounded-full bg-white shadow-lg hover:bg-gray-100 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800 ml-4 cursor-pointer",type:"button",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 mt-8",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Cart Items"}),0===v.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-4xl mb-2",children:"ðŸ›’"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-1",children:"Your cart is empty"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Add some products to get started!"})]}):t.jsx("div",{className:"space-y-3 max-h-[calc(4*4.5rem+3*0.75rem)] overflow-y-auto pr-2",children:v.map(e=>t.jsxs("div",{className:"flex items-center p-3 rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 mr-4 bg-white",children:t.jsx("img",{src:k(e.name),alt:e.name,className:"w-full h-full object-contain p-1",onLoad:()=>{},onError:()=>{}})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:e.name}),t.jsxs("p",{className:"text-xl font-bold text-green-600",children:["$",e.price.toFixed(2)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[t.jsx("button",{onClick:()=>c(e.id,e.quantity-1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),t.jsxs("span",{className:"text-lg font-bold text-gray-800 min-w-[2rem] text-center",children:[e.quantity,e.cases&&t.jsxs("span",{className:"text-xs text-gray-500 block",children:["(",e.cases," case",e.cases>1?"s":"",")"]})]}),t.jsx("button",{onClick:()=>c(e.id,e.quantity+1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),t.jsxs("div",{className:"text-right mr-4",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Total"}),t.jsxs("p",{className:"text-xl font-bold text-green-600",children:["$",(e.price*e.quantity).toFixed(2)]})]}),t.jsx("button",{onClick:()=>x(e.id),className:"w-8 h-8 rounded-full bg-red-100 hover:bg-red-200 transition-colors flex items-center justify-center text-red-600 hover:text-red-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 mt-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Ordered Items"}),N?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"text-3xl mb-2",children:"â³"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-1",children:"Loading orders..."}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Please wait while we fetch your order history"})]}):0===f.length?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“¦"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-1",children:"No orders yet"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Your completed orders will appear here"})]}):t.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:f.map(e=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:["Order #",e.id.slice(-8)]}),t.jsx("div",{className:"text-sm text-gray-600",children:q(e.orderDate)}),t.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("delivered"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),t.jsx("div",{className:"space-y-2",children:e.items.map((s,r)=>t.jsxs("div",{className:"flex items-center p-2 rounded-lg border border-gray-100 hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden flex-shrink-0 mr-3",children:t.jsx("img",{src:k(s.name),alt:s.name,className:"w-full h-full object-contain p-1",onLoad:()=>{},onError:()=>{}})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:s.name}),t.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[t.jsxs("span",{className:"text-gray-600",children:["Qty: ",s.quantity,s.cases&&t.jsxs("span",{className:"text-gray-500",children:[" ","(",s.cases," case",s.cases>1?"s":"",")"]})]}),t.jsxs("span",{className:"text-green-600 font-semibold",children:["$",(s.price*s.quantity).toFixed(2)]})]})]})]},`${e.id}-${r}`))}),t.jsxs("div",{className:"text-right text-sm font-semibold text-gray-800 border-t pt-2",children:["Total: $",e.totalAmount.toFixed(2)]})]},e.id))})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 mt-8",style:{position:"sticky",top:"1rem"},children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Order Summary"}),t.jsxs("div",{className:"space-y-3 mb-4",children:[M.length>0&&t.jsx("div",{className:"space-y-2 mb-3",children:M.map((e,s)=>t.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[t.jsx("span",{children:e.type}),t.jsx("span",{children:e.display})]},s))}),t.jsxs("div",{className:"flex justify-between text-base",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotal"}),t.jsx("span",{className:"font-semibold",children:D})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[t.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-800",children:[t.jsx("span",{children:"Subtotal"}),t.jsx("span",{children:D})]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1 text-right",children:"+ shipping charge"}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:B})]})]}),t.jsx("button",{onClick:()=>{g?b(!0):j("/payment")},className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold text-lg py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg mb-3",children:"Proceed to Checkout"}),t.jsx("button",{onClick:$,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold text-base py-2 px-6 rounded-xl transition-all duration-300",children:"Continue Shopping"}),t.jsxs("div",{className:"mt-4 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600 mb-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-xs font-semibold",children:"Secure Checkout"})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Your payment information is encrypted and secure"})]})]})})]})})]})}),t.jsx(i,{isOpen:y,onClose:()=>b(!1),onLoginSuccess:async()=>{await p(),j("/payment")}})]})};export{c as Cart};
