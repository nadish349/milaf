import{a as e,b as s,j as n}from"./index-jHmpFEMT.js";import{r as a}from"./vendor-CyyySG0f.js";import{H as t}from"./Header-BhIOcdD6.js";import{m as l}from"./m1-DUCQGgOG.js";import{u as i}from"./router-Dpy7eVzN.js";import"./ui-D10HkiTw.js";import"./firebase-rYhY7HPw.js";import"./LoginForm-DeovXXO9.js";import"./card-CmKHpVHl.js";import"./label-DM97D0RX.js";import"./PostalCodeAutocomplete-DBHDLA_4.js";const r=()=>{const{cartItems:r,getTotalPrice:d,clearCart:o}=e();s();const c=i(),[m,p]=a.useState("processing"),[x,h]=a.useState(null),[b,u]=a.useState(0),[g,v]=a.useState(null),[f,j]=a.useState(""),[y,N]=a.useState("");a.useEffect(()=>{const e=localStorage.getItem("lastShippingCost");e&&u(parseFloat(e));const s=localStorage.getItem("billingAddress");s&&v(JSON.parse(s));const n=localStorage.getItem("shippingMode");n&&j(n);const a=localStorage.getItem("deliveryTime");a&&N(a);const t=setTimeout(()=>{p("success");const e=d(),s=e+b;h({orderId:`ORD-${Date.now()}`,paymentId:`PAY-${Date.now()}`,itemsTotal:e,shippingCost:b,totalAmount:s,timestamp:(new Date).toISOString()})},2e3);return()=>clearTimeout(t)},[b]);return n.jsxs("div",{className:"min-h-screen",style:{backgroundImage:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[n.jsx(t,{}),n.jsx("div",{className:"pt-16 pb-4 px-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("button",{onClick:()=>c("/payment"),className:"mb-4 w-8 h-8 rounded-full bg-white shadow-lg hover:bg-gray-100 transition-colors flex items-center justify-center text-gray-600 hover:text-gray-800",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Order Checkpoint"}),n.jsx("p",{className:"text-gray-600",children:"Your payment is being processed"})]}),n.jsxs("div",{className:"flex justify-center mb-8",children:["processing"===m&&n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-green-500 mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Processing Payment..."}),n.jsx("p",{className:"text-gray-500",children:"Please wait while we verify your payment"})]}),"success"===m&&n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h2",{className:"text-xl font-semibold text-green-600 mb-2",children:"Payment Successful!"}),n.jsx("p",{className:"text-gray-600",children:"Your order has been confirmed"})]}),"failed"===m&&n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Payment Failed"}),n.jsx("p",{className:"text-gray-600",children:"Please try again or contact support"})]})]}),x&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Details"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order ID:"}),n.jsx("span",{className:"font-semibold",children:x.orderId})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Payment ID:"}),n.jsx("span",{className:"font-semibold",children:x.paymentId})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Items Total:"}),n.jsxs("span",{className:"font-semibold",children:["$",x.itemsTotal.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Shipping:"}),n.jsxs("span",{className:"font-semibold",children:["$",x.shippingCost.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between border-t pt-2",children:[n.jsx("span",{className:"text-gray-600 font-bold",children:"Total Amount:"}),n.jsxs("span",{className:"font-bold text-lg",children:["$",x.totalAmount.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Date:"}),n.jsx("span",{className:"font-semibold",children:new Date(x.timestamp).toLocaleDateString()})]})]})]}),g&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Billing Address"}),n.jsxs("div",{className:"space-y-2",children:[g.companyName&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Company:"}),n.jsx("span",{className:"font-semibold",children:g.companyName})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Name:"}),n.jsx("span",{className:"font-semibold",children:g.buyerName})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Contact:"}),n.jsx("span",{className:"font-semibold",children:g.contact})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Street Address:"}),n.jsx("span",{className:"font-semibold",children:g.streetAddress})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Address:"}),n.jsx("span",{className:"font-semibold",children:g.address})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Zip Code:"}),n.jsx("span",{className:"font-semibold",children:g.zipcode})]})]})]}),f&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Shipping Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Shipping Mode:"}),n.jsx("span",{className:"font-semibold",children:"pickup"===f?"Pick up from Warehouse":"Australian Post Delivery"})]}),"pickup"===f&&n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{className:"font-medium",children:"Warehouse Address:"}),n.jsx("p",{children:"3/85 Alfred Street"}),n.jsx("p",{children:"Chipping Norton 2170 NSW Australia"})]}),"australian-post"===f&&n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"Standard domestic shipping via Australia Post"}),y&&n.jsxs("p",{children:["Delivery time: ",y]})]})]})]}),r.length>0&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Items"}),n.jsxs("div",{className:"space-y-3",children:[r.map(e=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:e.name}),n.jsxs("span",{className:"text-gray-500 ml-2",children:["x",e.quantity]})]}),n.jsxs("span",{className:"font-semibold",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["$",d().toFixed(2)]})]})})]})]}),"success"===m&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs("button",{onClick:()=>{if(!x||!g)return;const e=g.buyerName||"Customer",s=new Date,n=`${s.getDate().toString().padStart(2,"0")}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getFullYear()}`,a=`Order Details - ${e} ${n}`,t=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>${a}</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            line-height: 1.6;\n            color: #333;\n          }\n          .header { \n            text-align: center; \n            border-bottom: 2px solid #10B981; \n            padding-bottom: 20px; \n            margin-bottom: 30px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            color: #10B981; \n            margin-bottom: 10px;\n          }\n          .order-title { \n            font-size: 20px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .section { \n            margin-bottom: 25px; \n            border: 1px solid #ddd; \n            border-radius: 8px; \n            padding: 15px;\n          }\n          .section-title { \n            font-size: 18px; \n            font-weight: bold; \n            color: #10B981; \n            margin-bottom: 15px;\n            border-bottom: 1px solid #eee;\n            padding-bottom: 5px;\n          }\n          .detail-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 8px;\n            padding: 5px 0;\n          }\n          .detail-label { \n            font-weight: 600; \n            color: #666;\n          }\n          .detail-value { \n            font-weight: bold;\n          }\n          .items-table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-top: 10px;\n          }\n          .items-table th, .items-table td { \n            border: 1px solid #ddd; \n            padding: 10px; \n            text-align: left;\n          }\n          .items-table th { \n            background-color: #f8f9fa; \n            font-weight: bold;\n          }\n          .total-section { \n            background-color: #f8f9fa; \n            padding: 15px; \n            border-radius: 5px; \n            margin-top: 15px;\n          }\n          .final-total { \n            font-size: 18px; \n            font-weight: bold; \n            color: #10B981;\n            border-top: 2px solid #10B981;\n            padding-top: 10px;\n            margin-top: 10px;\n          }\n          .footer { \n            margin-top: 30px; \n            text-align: center; \n            color: #666; \n            font-size: 12px;\n            border-top: 1px solid #eee;\n            padding-top: 15px;\n          }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Milaf Cola Australia & NZ</div>\n          <div class="order-title">Order Details - ${e} ${n}</div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Order Information</div>\n          <div class="detail-row">\n            <span class="detail-label">Order ID:</span>\n            <span class="detail-value">${x.orderId}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Payment ID:</span>\n            <span class="detail-value">${x.paymentId}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Order Date:</span>\n            <span class="detail-value">${new Date(x.timestamp).toLocaleDateString()}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Status:</span>\n            <span class="detail-value" style="color: #10B981; font-weight: bold;">PAID</span>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Billing Address</div>\n          ${g.companyName?`<div class="detail-row"><span class="detail-label">Company:</span><span class="detail-value">${g.companyName}</span></div>`:""}\n          <div class="detail-row">\n            <span class="detail-label">Name:</span>\n            <span class="detail-value">${g.buyerName}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Contact:</span>\n            <span class="detail-value">${g.contact}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Street Address:</span>\n            <span class="detail-value">${g.streetAddress}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Address:</span>\n            <span class="detail-value">${g.address}</span>\n          </div>\n          <div class="detail-row">\n            <span class="detail-label">Zip Code:</span>\n            <span class="detail-value">${g.zipcode}</span>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Shipping Information</div>\n          <div class="detail-row">\n            <span class="detail-label">Shipping Mode:</span>\n            <span class="detail-value">${"pickup"===f?"Pick up from Warehouse":"Australian Post Delivery"}</span>\n          </div>\n          ${"pickup"===f?'\n            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">\n              <strong>Warehouse Address:</strong><br>\n              3/85 Alfred Street<br>\n              Chipping Norton 2170 NSW Australia\n            </div>\n          ':`\n            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">\n              <strong>Delivery Details:</strong><br>\n              Standard domestic shipping via Australia Post<br>\n              ${y?`Delivery time: ${y}`:"Delivery time: 5-7 business days"}\n            </div>\n          `}\n        </div>\n\n        <div class="section">\n          <div class="section-title">Order Items</div>\n          <table class="items-table">\n            <thead>\n              <tr>\n                <th>Item</th>\n                <th>Quantity</th>\n                <th>Price</th>\n                <th>Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${r.map(e=>`\n                <tr>\n                  <td>${e.name}</td>\n                  <td>${e.quantity}</td>\n                  <td>$${e.price.toFixed(2)}</td>\n                  <td>$${(e.price*e.quantity).toFixed(2)}</td>\n                </tr>\n              `).join("")}\n            </tbody>\n          </table>\n          \n          <div class="total-section">\n            <div class="detail-row">\n              <span class="detail-label">Items Total:</span>\n              <span class="detail-value">$${x.itemsTotal.toFixed(2)}</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Shipping:</span>\n              <span class="detail-value">$${x.shippingCost.toFixed(2)}</span>\n            </div>\n            <div class="detail-row final-total">\n              <span class="detail-label">Total Amount:</span>\n              <span class="detail-value">$${x.totalAmount.toFixed(2)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class="footer">\n          <p>Thank you for your order with Milaf Cola Australia & NZ</p>\n          <p>For any queries, please contact our customer service</p>\n        </div>\n      </body>\n      </html>\n    `,l=new Blob([t],{type:"text/html"}),i=URL.createObjectURL(l),d=document.createElement("a");d.href=i,d.download=`${a}.html`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(i)},className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),n.jsx("span",{children:"Print Order Details"})]}),n.jsx("button",{onClick:()=>{c("/orders")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200",children:"View My Orders"}),n.jsx("button",{onClick:()=>{o(),c("/")},className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200",children:"Continue Shopping"})]}),"failed"===m&&n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:()=>c("/payment"),className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200",children:"Try Payment Again"})}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600 mb-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),n.jsx("span",{className:"text-sm font-semibold",children:"Secure Payment"})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"Your payment information is encrypted and secure"})]})]})]})})]})};export{r as Checkpoint};
